<!-- Upload Image -->
<nz-form-item>
  <nz-form-label [nzFor]="'uploadFolder'" nzRequired>Upload Folder</nz-form-label>
  <nz-form-control>
    <input
      type="file"
      id="uploadFolder"
      (change)="onFileSelected($event)"
      webkitdirectory
      multiple
      accept="image/*"
      style="display: block"
    />
    <div *ngIf="imageError" class="error">{{ imageError }}</div>
  </nz-form-control>
</nz-form-item>

<!-- Display Uploaded Image -->
<nz-card *ngIf="uploadedImages.length > 0" nzBordered [nzTitle]="'Uploaded Image'" style="margin-bottom: 20px;">
  <div *ngFor= "let image of uploadedImages" style ="margin-bottom: 10px; position: relative;">
  <img [src]="image.path" alt="Original Image" style="max-width: 100%; border: 1px solid #ccc;" />
  <div
    *ngFor="let result of image.detectionResults"
    [ngStyle]="{
      position: 'absolute',
      border: '2px solid red',
      top: (result.y * scaleY) + 'px',
      left: (result.x * scaleX) + 'px',
      width: (result.width * scaleX) + 'px',
      height: (result.height * scaleY) + 'px'
    }"
  >
    <nz-tag
      [style]="{
        backgroundColor: 'red',
        color: 'red',
        fontSize: '12px',
        padding: '2px',
        position: 'absolute',
        top: '-20px'
      }"
    >
      {{ result.label }} {{ result.confidence ? '(' + result.confidence.toFixed(2) + ')' : '' }}
    </nz-tag>
  </div>
</div>
</nz-card>

<!-- Display Brightened Image -->
<nz-card *ngIf="brightenedImages.length > 0" nzBordered [nzTitle]="'Brightened Image'" style="margin-bottom: 20px;">
  <div *ngFor= "let brightened of brightenedImages" style="margin-bottom: 10px; position: relative;">
    <img [src]="brightened.path" alt="Brightened Image" style="max-width: 100%; border: 1px solid #ccc;" />
    <div
      *ngFor="let result of brightened.detectionResults"
      [ngStyle]="{
        position: 'absolute',
        border: '2px solid red',
        top: result.y + 'px',
        left: result.x + 'px',
        width: result.width + 'px',
        height: result.height + 'px'
      }"
    >
      <nz-tag
        [style]="{
          backgroundColor: 'red',
          color: 'red',
          fontSize: '12px',
          padding: '2px',
          position: 'absolute',
          top: '-20px'
        }"
      >
        {{ result.label }} {{ result.confidence ? '(' + result.confidence.toFixed(2) + ')' : '' }}
      </nz-tag>
    </div>
  </div>
  </nz-card>
